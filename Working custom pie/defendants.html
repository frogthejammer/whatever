<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Imperial County DA • Defendant Demographics</title>
  <link rel="icon" type="image/png" href="logo.png">
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- Single stylesheet -->
  <link rel="stylesheet" href="defendants.css" />

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>
  

  <!-- Logic -->
  <!-- Existing ethnicity + gender -->
  <script type="module" src="defendants.js" defer></script>
  <script type="module" src="defendantsDeclined.js" defer></script>
  <script type="module" src="defendantsGenderPie.js" defer></script>
  <script type="module" src="defendantsGender.js" defer></script>

  <!-- NEW age modules -->
  <script type="module" src="defendantsAge.js" defer></script>
  <script type="module" src="defendantsDeclinedAge.js" defer></script>
</head>
<body>

<header class="nav">
  <div class="branding">
    <span class="brand-main">Imperial County District Attorney’s Office</span>
    <span class="brand-sub">George Marquez, District Attorney</span>
  </div>
    <a href="https://da.imperialcounty.org/" >
        <img src="logo.png" alt="DA Logo" class="logo" />
    </a>
</header>

<section class="hero">
  <h1>Data Dashboard</h1>
  <p>Data transparency &amp; data-driven decision-making</p>
</section>

<nav class="main-nav">
  <a href="home.html">Home</a>
  <a href="goals.html">Goals</a>
  <a href="defendants.html" class="active">Defendants</a>
  <a href="victims.html">Victims</a>
  <a href="caseProcesses.html">Case Processes</a>
  <a href="customAnalysis.html">Custom Analysis</a>
</nav>

<!-- ===================================================================================== -->
<!-- ETHNICITY PANELS -->
<!-- ===================================================================================== -->
<section id="panelMain">
  <div class="dashboard-header">
    <h2>Defendant Ethnicity Demographics</h2>
    <p id="ethnicitySub">This chart compares the racial/ethnic breakdown of defendants to Imperial County’s population.</p>
  </div>

  <div class="loading-text" id="ethnicityLoading">Loading data...</div>

  <div class="hover-box">
    <div id="hoverRace" class="hover-line"></div>
    <div id="hoverDef"  class="hover-line"></div>
    <div id="hoverPop"  class="hover-line"></div>
  </div>

  <div class="bar-chart-box" style="display:none;" id="ethnicityChartWrapper">
    <canvas id="barChart"></canvas>
  </div>
</section>

<section id="panelCases">
  <div class="dashboard-header">
    <h2>Declined‑to‑Charge by Ethnicity</h2>
    <p>Percentage of defendants whose cases were rejected for filing.</p>
  </div>

  <div class="hover-box">
    <div id="hoverRace2" class="hover-line"></div>
    <div id="hoverDecl"  class="hover-line"></div>
    <div id="hoverAll"   class="hover-line"></div>
  </div>

  <div class="bar-chart-box">
    <canvas id="declinedChart"></canvas>
  </div>
</section>

<!-- ===================================================================================== -->
<!-- GENDER PANELS -->
<!-- ===================================================================================== -->
<section id="panelGenderPie">
  <div class="dashboard-header">
    <h2>Defendant Gender Demographics</h2>
    <p>Percent of defendants by gender (latest year).</p>
  </div>

  <div class="hover-box">
    <div id="hoverGenderLabel" class="hover-line"></div>
    <div id="hoverGenderPct"   class="hover-line"></div>
  </div>

  <div class="bar-chart-box">
    <canvas id="genderPieChart"></canvas>
  </div>
</section>

<section id="panelGender">
  <div class="dashboard-header">
    <h2>Declined-to-Charge by Gender</h2>
    <p>Percentage of defendants whose cases were rejected for filing, by gender.</p>
  </div>

  <div class="hover-box">
    <div id="hoverGender" class="hover-line"></div>
    <div id="hoverDeclG"  class="hover-line"></div>
    <div id="hoverAllG"   class="hover-line"></div>
  </div>

  <div class="bar-chart-box">
    <canvas id="genderChart"></canvas>
  </div>
</section>

<!-- ===================================================================================== -->
<!-- AGE PANELS (NEW) -->
<!-- ===================================================================================== -->
<section id="panelAgeMain">
  <div class="dashboard-header">
    <h2>Defendant Age Demographics</h2>
    <p>This chart compares the age breakdown of defendants to Imperial County’s population.</p>
  </div>

  <div class="hover-box">
    <div id="hoverAgeLabel" class="hover-line"></div>
    <div id="hoverAgeDef"  class="hover-line"></div>
    <div id="hoverAgePop"  class="hover-line"></div>
  </div>

  <div class="bar-chart-box">
    <canvas id="ageChart"></canvas>
  </div>
</section>

<section id="panelAgeCases">
  <div class="dashboard-header">
    <h2>Declined‑to‑Charge by Age</h2>
    <p>Percentage of defendants whose cases were rejected for filing, by age group.</p>
  </div>

  <div class="hover-box">
    <div id="hoverAgeLabel2" class="hover-line"></div>
    <div id="hoverAgeDecl"  class="hover-line"></div>
    <div id="hoverAgeAll"   class="hover-line"></div>
  </div>

  <div class="bar-chart-box">
    <canvas id="declinedAgeChart"></canvas>
  </div>
</section>

</body>
</html>